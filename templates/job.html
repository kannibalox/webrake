{% extends "layout.html" %}
{% block content %}
<div class="page_content">
  <h2>Job {{ job.id }} - {{ job.status }}</h2>
  <a href="{{ url_for('new') }}?copy={{ job.id}}">[Copy]</a>
  <a href="{{ url_for('purgeJob', jobID=job.id) }}">[Purge]</a>
  <a href="{{ url_for('finalizeJob', jobID=job.id) }}">[Finalize]</a>
  <a href="{{ url_for('exportJob', jobID=job.id) }}">[Export]</a>
  <table>
  <tr><th>Argument</th><th>Value</th></tr>
  {% for a in job.args %}
  <tr><td>{{ a }}</td><td>{{ job.args[a] }}</td></tr>
  {% endfor %}
  </table>
  {% for l in logs %}
  <a href="{{ url_for('static', filename=l.path[7:]) }}">{{ l.name }}</a> <a class="log_toggle" href="#" id="show_{{ l.ID }}">(show)</a>
  <div class="log_text" id="log_{{ l.ID }}" style="display: none;"><pre>{{ l.text|safe }}</pre></div></br>
  {% endfor %}
  {% for o in output %}
  <a href="{{ url_for('static', filename=o[7:]) }}">{{ o }}</a></br>
  {% endfor %}
  {% for i in images %}
  <img src="{{ url_for('static', filename=i[7:]) }}"/>
  {% endfor %} 
</div>
{% endblock %}
{% block script %}
<script type="text/javascript">
$(document).ready(function() {
  {% for l in logs %}
    $('#show_{{ l.ID }}').click(function() {
      if ($(this).text() == "(show)") {
        $(this).text("(hide)");
      } else {
        $(this).text("(show)");
      }
      $('#log_{{ l.ID }}').toggle(400);
      return false;
    });
  {% endfor %}
});
</script>
{% endblock %}
